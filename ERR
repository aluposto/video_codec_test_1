# Cell 2: install build tools into the current conda env
import os, subprocess, sys

print("Installing build tools into current conda env (no sudo)...")
subprocess.run(["conda","install","-y","-n", os.environ.get("CONDA_DEFAULT_ENV","dcvc_rt_env"),
                "-c","conda-forge","cmake","ninja","gxx_linux-64"], check=False)

# verify
for cmd in ("cmake","g++","ninja"):
    try:
        print(cmd, subprocess.check_output([cmd,"--version"], stderr=subprocess.STDOUT, text=True).splitlines()[0])
    except Exception as e:
        print(cmd, "not found or error:", e)




---------------------------------------------------------------------------
FileNotFoundError                         Traceback (most recent call last)
Cell In[14], line 5
      2 import os, subprocess, sys
      4 print("Installing build tools into current conda env (no sudo)...")
----> 5 subprocess.run(["conda","install","-y","-n", os.environ.get("CONDA_DEFAULT_ENV","dcvc_rt_env"),
      6                 "-c","conda-forge","cmake","ninja","gxx_linux-64"], check=False)
      8 # verify
      9 for cmd in ("cmake","g++","ninja"):

File ~/dcvc/miniconda3/envs/dcvc_rt_env/lib/python3.12/subprocess.py:548, in run(input, capture_output, timeout, check, *popenargs, **kwargs)
    545     kwargs['stdout'] = PIPE
    546     kwargs['stderr'] = PIPE
--> 548 with Popen(*popenargs, **kwargs) as process:
    549     try:
    550         stdout, stderr = process.communicate(input, timeout=timeout)

File ~/dcvc/miniconda3/envs/dcvc_rt_env/lib/python3.12/subprocess.py:1026, in Popen.__init__(self, args, bufsize, executable, stdin, stdout, stderr, preexec_fn, close_fds, shell, cwd, env, universal_newlines, startupinfo, creationflags, restore_signals, start_new_session, pass_fds, user, group, extra_groups, encoding, errors, text, umask, pipesize, process_group)
   1022         if self.text_mode:
   1023             self.stderr = io.TextIOWrapper(self.stderr,
   1024                     encoding=encoding, errors=errors)
-> 1026     self._execute_child(args, executable, preexec_fn, close_fds,
   1027                         pass_fds, cwd, env,
   1028                         startupinfo, creationflags, shell,
   1029                         p2cread, p2cwrite,
   1030                         c2pread, c2pwrite,
   1031                         errread, errwrite,
   1032                         restore_signals,
   1033                         gid, gids, uid, umask,
   1034                         start_new_session, process_group)
   1035 except:
   1036     # Cleanup if the child failed starting.
   1037     for f in filter(None, (self.stdin, self.stdout, self.stderr)):

File ~/dcvc/miniconda3/envs/dcvc_rt_env/lib/python3.12/subprocess.py:1955, in Popen._execute_child(self, args, executable, preexec_fn, close_fds, pass_fds, cwd, env, startupinfo, creationflags, shell, p2cread, p2cwrite, c2pread, c2pwrite, errread, errwrite, restore_signals, gid, gids, uid, umask, start_new_session, process_group)
   1953     err_msg = os.strerror(errno_num)
   1954 if err_filename is not None:
-> 1955     raise child_exception_type(errno_num, err_msg, err_filename)
   1956 else:
   1957     raise child_exception_type(errno_num, err_msg)

FileNotFoundError: [Errno 2] No such file or directory: 'conda'
